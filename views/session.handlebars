<h2 class="page-header">Wat Arun</h2>
<div class="row" ng-app="mapPage" ng-controller="mapCtrl">
    <div class="col-sm-7">
        <div class="map" style="height: 500px;">
            <form method="post" action="/users/map">
                <ul class="map-markers">
                    <li class="map-marker map-marker-it">
                        <i class="material-icons" id="location">place</i>
                        <div class="map-marker-info">
                            <div class="map-marker-info-inner animate-bounce-in">
                                <header>
                                    <button class="pin" name="send" value="it"><h4>Faculty of Information Technology</h4></button>
                                </header>
                            </div>
                        </div>
                    </li>
                    <li class="map-marker map-marker-rama4-monument">
                        <i class="material-icons" id="location">place</i>
                        <div class="map-marker-info">
                            <div class="map-marker-info-inner animate-bounce-in">
                                <header>
                                    <button class="pin" name="send" value="rama4-monument"><h4>Rama IV Monument</h4></button>
                                </header>
                            </div>
                        </div>
                    </li>
                    <li class="map-marker map-marker-prathep-building">
                        <i class="material-icons"i id="location">place</i>
                        <div class="map-marker-info">
                            <div class="map-marker-info-inner animate-bounce-in">
                                <header>
                                    <button class="pin" name="send" value="prathep-building"><h4>Prathep Building</h4></button>
                                </header>
                            </div>
                        </div>
                    </li>
                </ul>
            </form>
    
            <!-- DRAW MAP -->
            <svg x="0px" y="0px" viewBox="0 0 2200 1500" style="enable-background:new 0 0 2200 1500;" xml:space="preserve">
                <style type="text/css">
                .st0{display:none;}
                .st1{fill:none;stroke:#2C3E50;stroke-width:50;stroke-miterlimit:10;}
                .st2{fill:none;stroke:#2C3E50;stroke-width:20;stroke-miterlimit:10;}
                </style>
                <g id="Layer_1" class="st0">
                    <image style="display:inline;overflow:visible;" width="581" height="408" transform="matrix(3.6765 0 0 3.6765 0 0)">
                    </image>
                </g>
                <g id="Layer_2">
                    <polyline class="st1" points="2136,355.8 1437.9,352.8 1230.8,619.8 1230.8,1393.9  "></polyline>
                    <line class="st2" x1="159.7" y1="814.8" x2="1230.8" y2="814.8"></line>
                    <line class="st2" x1="351.7" y1="814.8" x2="351.7" y2="949.8"></line>
                    <line class="st2" x1="486.8" y1="814.8" x2="486.8" y2="949.8"></line>
                    <line class="st2" x1="651.8" y1="862.8" x2="651.8" y2="1393.9"></line>
                    <line class="st2" x1="651.8" y1="1306.9" x2="552.8" y2="1306.9"></line>
                    <line class="st2" x1="168.7" y1="1128.4" x2="651.8" y2="1128.4"></line>
                    <line class="st2" x1="450.8" y1="1128.4" x2="450.8" y2="1171.9"></line>
                    <line class="st2" x1="651.8" y1="1078.9" x2="1230.8" y2="1078.9"></line>
                    <line class="st2" x1="165.3" y1="1171.9" x2="75.7" y2="1171.9"></line>
                    <line class="st2" x1="164.2" y1="1104.4" x2="120.5" y2="1104.4"></line>
                    <line class="st2" x1="159.7" y1="1042.8" x2="120.5" y2="1042.8"></line>
                    <line class="st2" x1="159.7" y1="991.8" x2="21.7" y2="991.8"></line>
                    <line class="st2" x1="39.7" y1="1270.9" x2="142.4" y2="1270.9"></line>
                    <line class="st2" x1="1245.8" y1="931.8" x2="1587.9" y2="931.8"></line>
                    <line class="st2" x1="1587.9" y1="1393.9" x2="1587.9" y2="769.8"></line>
                    <line class="st2" x1="1416.9" y1="931.8" x2="1416.9" y2="769.8"></line>
                    <line class="st2" x1="1587.9" y1="931.8" x2="1737.9" y2="931.8"></line>
                    <line class="st2" x1="2052.9" y1="1042.8" x2="1908.9" y2="1042.8"></line>
                    <line class="st2" x1="2052.9" y1="1104.4" x2="2001.9" y2="1104.4"></line>
                    <line class="st2" x1="2052.9" y1="1234.9" x2="1587.9" y2="1234.9"></line>
                    <line class="st2" x1="1896.9" y1="1234.9" x2="1896.9" y2="1104.4"></line>
                    <line class="st2" x1="1527.9" y1="353.2" x2="1527.9" y2="202.8"></line>
                    <line class="st2" x1="1884.9" y1="352.8" x2="1884.9" y2="202.8"></line>
                    <line class="st2" x1="39.7" y1="685.8" x2="2136" y2="685.8"></line>
                    <line class="st2" x1="717.8" y1="76.8" x2="717.8" y2="685.8"></line>
                    <polyline class="st2" points="717.8,415.8 429.8,415.8 429.8,685.8   "></polyline>
                    <line class="st2" x1="717.8" y1="526.8" x2="1230.8" y2="526.8"></line>
                    <line class="st2" x1="882.8" y1="526.8" x2="882.8" y2="685.8"></line>
                    <line class="st2" x1="810.8" y1="526.8" x2="810.8" y2="415.8"></line>
                    <polyline class="st2" points="846.8,202.8 846.8,313.8 717.8,313.8   "></polyline>
                    <polyline class="st2" points="1230.8,415.8 1161.8,415.8 1161.8,526.8  "></polyline>
                    <line class="st2" x1="1629.9" y1="352.8" x2="1629.9" y2="685.8"></line>
                    <line class="st2" x1="1791.9" y1="352.8" x2="1791.9" y2="685.8"></line>
                    <line class="st2" x1="1980.9" y1="355.1" x2="1980.9" y2="685.8"></line>
                    <polyline class="st2" points="1980.9,457.8 1869.9,457.8 1869.9,352.8  "></polyline>
                    <polyline class="st2" points="165.3,589.8 165.3,685.8 165.3,589.8 46,503 46,313.8 168.7,220.8 168.7,172.8 1230.8,172.8 1230.8,619.8  "></polyline>
                    <line class="st1" x1="18.3" y1="76.8" x2="2157.5" y2="76.8"></line>
                    <line class="st1" x1="18.3" y1="13.7" x2="2157.5" y2="13.7"></line>
                    <line class="st1" x1="1587.9" y1="1393.9" x2="1587.9" y2="1500"></line>
                    <line class="st1" x1="1230.8" y1="1393.9" x2="1587.9" y2="1393.9"></line>
                    <polyline class="st2" points="1587.9,1393.9 2052.9,1393.9 2052.9,949.8 1878.9,775.8 1230.8,775.8  "></polyline>
                    <polyline class="st2" points="142.4,1234.9 142.4,1306.9 39.7,1306.9 39.7,1234.9 164.2,1234.9  "></polyline>
                    <polyline class="st2" points="1230.8,1393.9 159.7,1393.9 159.7,949.8 1026.8,949.8 1026.8,1393.9   "></polyline>
                    <line class="st2" x1="1497" y1="353" x2="1497" y2="621"></line>
                    <polyline class="st2" points="1330.1,491.8 1371,533 1497,533  "></polyline>
                </g>
            </svg>
        </div>
    </div>

    <div class="col-sm-5">


		<div>	
			<ul  class="nav nav-pills nav-justified" style="background: #3F51B5;">
				<li class="nav-item active">
        			<a  href="#info" data-toggle="tab" style="color: white;">Overview</a>
				</li>
				<li class="nav-item">
					<a href="#objective" data-toggle="tab" style="color: white;">Assignment</a>
				</li>
			</ul>
			<div class="tab-content clearfix">
		  		<div class="tab-pane active" id="info" style="padding: 2em; background: #F5F5F5; height: 500px;">
          			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
				<div class="tab-pane" id="objective" style="height: 500px; background: #F5F5F5; height: 500px;">
          			<div id="accordion" role="tablist" aria-multiselectable="true">
						<div class="card">
			    			<div class="card-header" role="tab" id="headingOne">
			      				<h5 class="mb-0">
			        				<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
			          					Objective #1
			        				</a>
			      				</h5>
			    			</div>
			    			<div id="collapseOne" class="collapse" role="tabpanel" aria-labelledby="headingOne">
			      				<div class="card-block">
			        				Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat 			skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid 			single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente 			ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you 			probably haven't heard of them accusamus labore sustainable VHS.
			      				</div>
			    			</div>
						</div>
						<div class="card">
			    			<div class="card-header" role="tab" id="headingTwo">
			      				<h5 class="mb-0">
			        				<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
			          					Fill in Blank
			        				</a>
			      				</h5>
			    			</div>
			    			<div id="collapseTwo" class="collapse" role="tabpanel" aria-labelledby="headingTwo">
			      				<div class="card-block">
			      					<h4>Where is IT?</h4>
			        				<div class="input-group">
      									<input type="text" class="form-control" placeholder="Answer">
      									<span class="input-group-btn">
        									<button class="btn btn-default" type="button">Go!</button>
      									</span>
    								</div>
			      				</div>
			    			</div>
						</div>	
						<div class="card">
			    			<div class="card-header" role="tab" id="headingThree">
			      				<h5 class="mb-0">
			        				<a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
			          					Quiz
			        				</a>
			      				</h5>
			    			</div>
			    			<div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree">
			      				<div class="card-block">
			        				<div class="quiz-area" ng-show="inProgress" ng-init="start()">
										<div ng-show="!quizOver">
											<h4 id="question">[[question]]</h4>
											<ul id="options">
												<li ng-repeat="option in options" class="input-group" style="padding: .5em;">
													<input type="radio" name="answer" value="[[option]]">
														[[option]]
												</li>
											</ul>
											<button ng-click="checkAnswer(); nextQuestion()" ng-show="answerMode" type="button" class="btn btn-success btn-lg btn-block">Next</button>
										</div>
										<div ng-show="quizOver">
											<h2>Quiz is over</h2>
											<span>Your Score is [[score]]</span><br>
											<button ng-click="reset()" type="button" class="btn btn-success btn-lg btn-block">Submit Score</button>
										</div>	
									</div>
			      				</div>
			    			</div>
						</div>
					</div>
				</div>
			</div>
		</div>
  	</div>



</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src='http://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js'></script>
<script>
	var app = angular.module('mapPage', []);

	app.config(function($interpolateProvider) {
    	$interpolateProvider.startSymbol('[[');
    	$interpolateProvider.endSymbol(']]');
  	});

	app.controller("mapCtrl",function($scope,$http){
   		// GEN Quiz
		$scope.start = function() {
			$scope.id = 0;
			$scope.quizOver = false;
			$scope.inProgress = true;
			$scope.getQuestion();
		};

		$scope.reset = function() {
			var data = {"score" : $scope.score};
			$http.post('/users/question', data).then(function(response){
				console.log('SUBMITED SCORE');
			});
			$scope.inProgress = false;
			$scope.score = 0;
		}
		$scope.getQuestion = function() {
			$http.get('/users/question_data').then(function(response){
				if ($scope.id < response.data.length){
					$scope.question = response.data[$scope.id].question;
				 	$scope.options = response.data[$scope.id].options;
					$scope.answer = response.data[$scope.id].answer;
					$scope.answerMode = true;
					console.log($scope.answer);
				}
				else {
					$scope.quizOver = true;
				}
			});
		};
		$scope.checkAnswer = function() {
			if(!$('input[name=answer]:checked').length) return;
			var ans = $('input[name=answer]:checked').val();
			if(ans == $scope.options[$scope.answer]) {
				$scope.score++;
				$scope.correctAns = true;
			} else {
				$scope.correctAns = false;
			}
			$scope.answerMode = false;
		};
		$scope.nextQuestion = function() {
			$scope.id++;
			$scope.getQuestion();
		}
		$scope.reset();

		$scope.send = function(message){
			$http.post('/send', message);
		};
  		
	});
</script>


